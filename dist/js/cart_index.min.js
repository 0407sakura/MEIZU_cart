"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,n,e){return n&&_defineProperties(t.prototype,n),e&&_defineProperties(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function convertStrToObj(t){return t?JSON.parse(t):{}}function shopNum(){$(".count span:nth-child(1)").text($(".one").length),$(".count span:nth-child(2)").text($(".one:checked").length)}function shopTotal(){var countTotal=0;$($(".one:checked")).each(function(){countTotal+=eval($(this).parent().parent().children(".total").text()),console.log($(this).parent().parent().children(".total").text())}),$(".totalprice").text(countTotal)}var cookie_obj={sp1:{name:"魅族 16s Pro",num:9,tips:"全网通公开版 黑之秘境 8+128GB",price:2999,src:"./img/cart-19.png"},sp2:{name:"PANDAER GAME START 副本晴雨伞",num:1,tips:"GAME START",price:209,src:"./img/cart-20.png"},sp3:{name:"PANDAER × XOG 白金星舟耳机",num:19,tips:"白金星舟",price:50,src:"img/cart-18.png"}},phonenumber=($.cookie("products",JSON.stringify(cookie_obj)),2132436),Cart=function(){function t(){_classCallCheck(this,t),this.mycenter(),this.event(),this.other(),this.paymoney()}return _createClass(t,[{key:"event",value:function(){var e=convertStrToObj($.cookie("products")?$.cookie("products"):"");jQuery.each(e,function(t){var n=e[t];$(".m-c-footer").prev().append('<ul class="goodInfo" data-good-id="'.concat(t,'">\n                <li><input type="checkbox" class="one opt"></li>\n                <li><img src="').concat(n.src,'"></li>\n\t\t\t\t<li><p>').concat(n.name,"</p><p>").concat(n.tips,"</p></li>\n\t\t\t\t<li>").concat(n.price,'</li>\n\t\t\t\t<li class="num">\n\t\t\t\t\t<a href="javascript:;" class="minus">-</a>\n\t\t\t\t\t<input type="text" name="" id="" value="').concat(n.num,'" />\n\t\t\t\t\t<a href="javascript:;" class="plus">+</a>\n\t\t\t\t</li>\n\t\t\t\t<li class="total">').concat(n.price*n.num,'</li>\n\t\t\t\t<li><a href="javascript:;" class="delete">--</a></li>\n            </ul>'))}),$(".minus").each(function(){$(this).click(function(){var t=$(this).parent().parent().attr("data-good-id"),n=convertStrToObj($.cookie("products")?$.cookie("products"):"");1<n[t].num&&n[t].num--,$.cookie("products",JSON.stringify(n)),$(this).next().val(n[t].num),$(this).parent().next().text(n[t].price*n[t].num),shopTotal()})}),$(".plus").click(function(){var t=$(this).parent().parent().attr("data-good-id"),n=convertStrToObj($.cookie("products")?$.cookie("products"):"");n[t].num++,$.cookie("products",JSON.stringify(n)),$(this).prev().val(n[t].num),$(this).parent().next().text(n[t].price*n[t].num),shopTotal()}),$(".num>input").blur(function(){var t=$(this).parent().parent().attr("data-good-id"),n=convertStrToObj($.cookie("products")?$.cookie("products"):""),e=$(this).val();/^\d+$/.test(e)&&0<e||(e=1),n[t].num=e,$.cookie("products",JSON.stringify(n)),$(this).val(n[t].num),$(this).parent().next().text=n[t].price*n[t].num}),$(".editor").click(function(){$(this).toggleClass("finnished"),$(this).hasClass("finnished")?($(this).text("完成"),$(".delete").html('<span class="iconfont icon-cuo"></span>'),$(".icon-cuo").click(function(){var t=$(this).parent().parent().parent(),n=($(".mz-mask").css("display","block"),$(".icon-guanbijiantou").click(function(){$(".mz-mask").css("display","none")}),$(".success").click(function(){$(".mz-mask").css("display","none")}),$(".cancel").click(function(){$(".mz-mask").css("display","none"),t.remove(),shopNum(),shopTotal()}),t.attr("data-good-id")),e=convertStrToObj($.cookie("products")?$.cookie("products"):"");delete e[n],$.cookie("products",JSON.stringify(e))})):($(this).text("编辑"),$(".delete").html("--"))})}},{key:"other",value:function(){function t(){$(".count span:nth-child(1)").text($(".one").length),$(".count span:nth-child(2)").text($(".one:checked").length)}t(),$(".all").click(function(){$(this).is(":checked")?$(".opt").prop("checked",!0):$(".opt").prop("checked","")}),$(".one").click(function(){$(".one:checked").length===$(".one").length?$(".all").prop("checked",!0):$(".all").prop("checked","")}),$(".opt").click(function(){t(),shopTotal(),0<$(".one:checked").length?($(".free").text("已免运费"),$(".payit").css("background-color","#F66567")):($(".free").text(" "),$(".payit").css("background-color","#DBDBDB"))}),t()}},{key:"mycenter",value:function(){$(".user>ul>a>span").first().text("用户".concat(phonenumber)),$(".user").hover(function(){$("#personal").attr("class","iconfont icon-jiantoushang")},function(){$("#personal").attr("class","iconfont icon-jiantouxia")})}},{key:"paymoney",value:function(){var t=this,n=0;$.each($(".one"),function(){$(t).is(":checked")&&(n+=$(t).parent().parent().children(".totalprice"))}),$(".totalprice").text(n)}}]),t}();new Cart;